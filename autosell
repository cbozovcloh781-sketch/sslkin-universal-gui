-- Autosell Module –¥–ª—è YBA
-- –û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Å–µ–ª–ª–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏
local AutosellConfig = {
    Enabled = false,
    ShiftploxPosition = Vector3.new(-709, -25, -332), -- –ø–æ–∑–∏—Ü–∏—è NPC Shiftplox
    ItemLimits = {
        ["Mysterious Arrow"] = 25,
        ["Rokakaka"] = 25,
        ["Pure Rokakaka"] = 25,
        ["Diamond"] = 30,
        ["Gold Coin"] = 45,
        ["Steel Ball"] = 10,
        ["Clackers"] = 10,
        ["Caesar's Headband"] = 10,
        ["Zeppeli's Hat"] = 10,
        ["Zeppeli's Scarf"] = 10,
        ["Quinton's Glove"] = 10,
        ["Stone Mask"] = 10,
        ["Ancient Scroll"] = 10,
        ["DIO's Diary"] = 10,
        ["Dio's Diary"] = 10,
        ["Rib Cage of The Saint's Corpse"] = 20,
        -- Lucky Arrow –∏ Lucky Stone Mask –∏—Å–∫–ª—é—á–µ–Ω—ã
    },
    Items = {
        ["Mysterious Arrow"] = false,
        ["Rokakaka"] = false,
        ["Pure Rokakaka"] = false,
        ["Diamond"] = false,
        ["Gold Coin"] = false,
        ["Steel Ball"] = false,
        ["Clackers"] = false,
        ["Caesar's Headband"] = false,
        ["Zeppeli's Hat"] = false,
        ["Zeppeli's Scarf"] = false,
        ["Ancient Scroll"] = false,
        ["Quinton's Glove"] = false,
        ["Stone Mask"] = false,
        ["Rib Cage of The Saint's Corpse"] = false,
        ["DIO's Diary"] = false,
        ["Dio's Diary"] = false,
    }
}

-- Autosell variables
local isAutosellEnabled = false
local autosellConnections = {}
local isSellingToNPC = false
local autosellCheckTimer = nil
local deathCheckConnection = nil

-- –§—É–Ω–∫—Ü–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –¥–≤–∏–∂–µ–Ω–∏–π
local function emergencyStopMovement()
    print("ü§ñ AUTOSELL: –≠–ö–°–¢–†–ï–ù–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –î–í–ò–ñ–ï–ù–ò–Ø!")
    
    local player = Players.LocalPlayer
    if not player or not player.Character then return end
    
    local humanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
    local humanoid = player.Character:FindFirstChild("Humanoid")
    
    -- –£–¥–∞–ª—è–µ–º –≤—Å–µ BodyMovers
    if humanoidRootPart then
        local allMovers = humanoidRootPart:GetChildren()
        for _, child in pairs(allMovers) do
            if child:IsA("BodyVelocity") or child:IsA("BodyPosition") or child:IsA("BodyAngularVelocity") or 
               child:IsA("BodyThrust") or child:IsA("BodyForce") or child:IsA("BodyGyro") then
                child:Destroy()
            end
        end
    end
    
    -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—É–º–∞–Ω–æ–∏–¥–∞
    if humanoid then
        humanoid.PlatformStand = false
        humanoid.WalkSpeed = 16
        humanoid.JumpPower = 50
        humanoid.JumpHeight = 7.2
        humanoid.Sit = false
    end
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
    workspace.Gravity = 196.2
    
    -- –û—Ç–∫–ª—é—á–∞–µ–º fly –∏ noclip
    if _G.MovementConfig then
        if _G.MovementConfig.Fly and _G.MovementConfig.Fly.Enabled then
            _G.MovementConfig.Fly.Enabled = false
            if _G.stopFly then _G.stopFly() end
        end
        if _G.MovementConfig.NoClip and _G.MovementConfig.NoClip.Enabled then
            _G.MovementConfig.NoClip.Enabled = false
            if _G.stopNoClip then _G.stopNoClip() end
        end
    end
    
    print("ü§ñ AUTOSELL: –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
end

-- Autosell Functions

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞
local function checkPlayerDeath()
    local player = Players.LocalPlayer
    if not player or not player.Character then return true end
    
    local humanoid = player.Character:FindFirstChild("Humanoid")
    if not humanoid then return true end
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    if humanoid.Health <= 0 then
        print("ü§ñ AUTOSELL: –ò–≥—Ä–æ–∫ —É–º–µ—Ä! –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Å–µ–ª...")
        stopAutosell()
        
        -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º –µ—Å–ª–∏ –æ–Ω –∑–∞–ø—É—â–µ–Ω
        if _G.stopAutofarm and type(_G.stopAutofarm) == "function" then
            print("ü§ñ AUTOSELL: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º –∏–∑-–∑–∞ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞...")
            _G.stopAutofarm()
        end
        
        return true
    end
    
    return false
end

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ —Ä—é–∫–∑–∞–∫–µ
local function checkInventoryForMaxItems()
    local player = Players.LocalPlayer
    if not player or not player.Backpack then return {} end
    
    local itemCounts = {}
    local itemsAtMax = {}
    
    -- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ —Ä—é–∫–∑–∞–∫–µ
    for _, item in pairs(player.Backpack:GetChildren()) do
        if item:IsA("Tool") then
            local itemName = item.Name
            itemCounts[itemName] = (itemCounts[itemName] or 0) + 1
        end
    end
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –º–∞–∫—Å–∏–º—É–º–∞
    for itemName, isEnabled in pairs(AutosellConfig.Items) do
        if isEnabled and itemCounts[itemName] and AutosellConfig.ItemLimits[itemName] then
            local maxCount = AutosellConfig.ItemLimits[itemName]
            if itemCounts[itemName] >= maxCount then
                table.insert(itemsAtMax, itemName)
                print("ü§ñ AUTOSELL: –ü—Ä–µ–¥–º–µ—Ç", itemName, "–¥–æ—Å—Ç–∏–≥ –º–∞–∫—Å–∏–º—É–º–∞:", itemCounts[itemName], "/", maxCount)
            end
        end
    end
    
    return itemsAtMax
end

-- –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∫ NPC Shiftplox
local function moveToShiftplox(callback)
    print("ü§ñ AUTOSELL: –õ–µ—Ç–∏–º –∫ NPC Shiftplox...")
    
    -- –í–∫–ª—é—á–∞–µ–º NoClip –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª–µ—Ç–∞
    if _G.MovementConfig and not _G.MovementConfig.NoClip.Enabled then
        print("ü§ñ AUTOSELL: –í–∫–ª—é—á–∞–µ–º NoClip –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª–µ—Ç–∞...")
        _G.MovementConfig.NoClip.Enabled = true
        if _G.startNoClip and type(_G.startNoClip) == "function" then
            _G.startNoClip()
        end
    end
    
    -- –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–ø–∏–ª–æ—Ç (–Ω–µ _G.moveToPosition!)
    print("ü§ñ AUTOSELL: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–ø–∏–ª–æ—Ç —Å NoClip...")
        
        local player = Players.LocalPlayer
        if not player or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
            print("ü§ñ AUTOSELL: –û—à–∏–±–∫–∞ - –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω!")
            if callback then callback() end
            return
        end
        
        local humanoidRootPart = player.Character.HumanoidRootPart
        local humanoid = player.Character:FindFirstChild("Humanoid")
        
        -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        if humanoid then
            humanoid.WalkSpeed = 0
            humanoid.JumpPower = 0
            humanoid.JumpHeight = 0
            humanoid.HipHeight = 0
            humanoid.Sit = false -- –£–±–∏—Ä–∞–µ–º —Å–∏–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å
        end
        
        -- –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –≤—Å–µ—Ö BodyMovers
        local allBodyMovers = humanoidRootPart:GetChildren()
        for _, child in pairs(allBodyMovers) do
            if child:IsA("BodyVelocity") or child:IsA("BodyPosition") or child:IsA("BodyAngularVelocity") or 
               child:IsA("BodyThrust") or child:IsA("BodyForce") or child:IsA("BodyGyro") then
                print("ü§ñ AUTOSELL: –£–¥–∞–ª—è–µ–º", child.Name, "–ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞")
                child:Destroy()
            end
        end
        
        task.wait(0.1) -- –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
        
        print("ü§ñ AUTOSELL: –ê–≤—Ç–æ–ø–∏–ª–æ—Ç –∫ NPC Shiftplox –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (—Å NoClip)!")
        print("ü§ñ AUTOSELL: –ü–æ–∑–∏—Ü–∏—è NPC:", AutosellConfig.ShiftploxPosition)
        
        -- –°–æ–∑–¥–∞–µ–º BodyVelocity –¥–ª—è –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ, –Ω–æ —Å NoClip)
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Name = "AutosellBodyVelocity"
        bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.Parent = humanoidRootPart
        
        -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –æ—Ç–∫–ª—é—á–∞–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
        local originalGravity = workspace.Gravity
        workspace.Gravity = 0
        print("ü§ñ AUTOSELL: –ê–≤—Ç–æ–ø–∏–ª–æ—Ç fly –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")
        
        -- –î–≤–∏–∂–µ–Ω–∏–µ –∫ NPC
        local moveConnection
        local isMoving = true
        
        moveConnection = RunService.Heartbeat:Connect(function()
            if not isMoving then
                if moveConnection then
                    moveConnection:Disconnect()
                end
                return
            end
            
            local currentPos = humanoidRootPart.Position
            local distance = (AutosellConfig.ShiftploxPosition - currentPos).Magnitude
            
            if distance > 5 then
                -- –ê–≤—Ç–æ–ø–∏–ª–æ—Ç: –ª–µ—Ç–∏–º –∫ —Ü–µ–ª–∏
                if bodyVelocity and bodyVelocity.Parent then
                    local direction = (AutosellConfig.ShiftploxPosition - currentPos).Unit
                    local moveVector = direction * 100 -- —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–µ—Ç–∞
                    bodyVelocity.Velocity = moveVector
                end
            else
                -- –û–°–¢–ê–ù–û–í–ö–ê: –î–æ—Å—Ç–∏–≥–ª–∏ NPC - –ü–û–õ–ù–ê–Ø –∑–∞–º–æ—Ä–æ–∑–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                print("ü§ñ AUTOSELL: –î–æ—Å—Ç–∏–≥–ª–∏ NPC, –ó–ê–ú–û–†–ê–ñ–ò–í–ê–ï–ú –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...")
                isMoving = false
                
                -- 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–ø–∏–ª–æ—Ç fly
                if bodyVelocity and bodyVelocity.Parent then
                    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
                    bodyVelocity:Destroy()
                    print("ü§ñ AUTOSELL: –ê–≤—Ç–æ–ø–∏–ª–æ—Ç fly –æ—Ç–∫–ª—é—á–µ–Ω")
                end
                
                -- 2. –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –ó–ê–ú–û–†–û–ó–ö–ê - —É–±–∏—Ä–∞–µ–º –≤—Å–µ BodyVelocity
                local allBodyVelocities = humanoidRootPart:GetChildren()
                for _, child in pairs(allBodyVelocities) do
                    if child:IsA("BodyVelocity") or child:IsA("BodyPosition") or child:IsA("BodyAngularVelocity") then
                        child:Destroy()
                        print("ü§ñ AUTOSELL: –£–¥–∞–ª–µ–Ω", child.Name)
                    end
                end
                
                -- 3. –û—Ç–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π fly —Å–∏—Å—Ç–µ–º—ã, –µ—Å–ª–∏ –æ–Ω –≤–∫–ª—é—á–µ–Ω
                if _G.MovementConfig and _G.MovementConfig.Fly and _G.MovementConfig.Fly.Enabled then
                    print("ü§ñ AUTOSELL: –û—Ç–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π fly...")
                    _G.MovementConfig.Fly.Enabled = false
                    if _G.stopFly and type(_G.stopFly) == "function" then
                        _G.stopFly()
                    end
                end
                
                -- 4. –û—Ç–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π noclip, –µ—Å–ª–∏ –æ–Ω –≤–∫–ª—é—á–µ–Ω
                if _G.MovementConfig and _G.MovementConfig.NoClip and _G.MovementConfig.NoClip.Enabled then
                    print("ü§ñ AUTOSELL: –û—Ç–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π noclip...")
                    _G.MovementConfig.NoClip.Enabled = false
                    if _G.stopNoClip and type(_G.stopNoClip) == "function" then
                        _G.stopNoClip()
                    end
                end
                
                -- 5. –ü–û–õ–ù–ê–Ø –∑–∞–º–æ—Ä–æ–∑–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                if humanoid then
                    humanoid.PlatformStand = true -- –û—Ç–∫–ª—é—á–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º
                    humanoid.WalkSpeed = 0
                    humanoid.JumpPower = 0
                    humanoid.JumpHeight = 0
                end
                
                -- 6. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–ª–∏–∑–∏—é —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞ (–æ—Ç–∫–ª—é—á–∞–µ–º noclip)
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = true
                    end
                end
                
                -- 7. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
                workspace.Gravity = originalGravity
                
                -- 8. –§–∏–∫—Å–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é —Å BodyPosition
                local freezeBodyPosition = Instance.new("BodyPosition")
                freezeBodyPosition.Name = "AutosellFreeze"
                freezeBodyPosition.MaxForce = Vector3.new(9e9, 9e9, 9e9)
                freezeBodyPosition.Position = humanoidRootPart.Position
                freezeBodyPosition.D = 5000 -- –í—ã—Å–æ–∫–æ–µ –¥–µ–º–ø—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ
                freezeBodyPosition.P = 10000 -- –í—ã—Å–æ–∫–∞—è —Å–∏–ª–∞
                freezeBodyPosition.Parent = humanoidRootPart
                
                moveConnection:Disconnect()
                
                -- –ñ–î–ï–ú 3 –°–ï–ö–£–ù–î–´ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
                task.spawn(function()
                    print("ü§ñ AUTOSELL: –û–∂–∏–¥–∞–µ–º 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞–º–æ—Ä–æ–∑–∫–∏...")
                    task.wait(3)
                    
                    -- –£–±–∏—Ä–∞–µ–º –∑–∞–º–æ—Ä–æ–∑–∫—É –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø—Ä–æ–¥–∞–∂–∏
                    if freezeBodyPosition and freezeBodyPosition.Parent then
                        freezeBodyPosition:Destroy()
                    end
                    
                    if humanoid then
                        humanoid.PlatformStand = false -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                        humanoid.WalkSpeed = 16
                        humanoid.JumpPower = 50
                        humanoid.JumpHeight = 7.2
                    end
                    
                    print("ü§ñ AUTOSELL: –ü–µ—Ä—Å–æ–Ω–∞–∂ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–¥–∞–∂—É!")
                    
                    if callback then
                        callback()
                    end
                end)
            end
        end)
end

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à
local function pressKey(keyCode, holdTime)
    holdTime = holdTime or 0.1
    game:GetService("VirtualInputManager"):SendKeyEvent(true, keyCode, false, game)
    task.wait(holdTime)
    game:GetService("VirtualInputManager"):SendKeyEvent(false, keyCode, false, game)
end

-- –í–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç –≤ —Ä—É–∫–∏
local function equipItem(itemName)
    local player = Players.LocalPlayer
    if not player or not player.Backpack then return false end
    
    local item = player.Backpack:FindFirstChild(itemName)
    if item and item:IsA("Tool") then
        item.Parent = player.Character
        print("ü§ñ AUTOSELL: –í–∑—è–ª–∏ –≤ —Ä—É–∫–∏ –ø—Ä–µ–¥–º–µ—Ç:", itemName)
        return true
    end
    return false
end

-- –ù–æ–≤—ã–π —Ü–∏–∫–ª –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–µ–¥–º–µ—Ç–∞
local function sellSingleItemToNPC(itemName)
    print("ü§ñ AUTOSELL: –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–¥–∞–∂—É –ø—Ä–µ–¥–º–µ—Ç–∞:", itemName)
    
    -- –ë–µ—Ä–µ–º –ø—Ä–µ–¥–º–µ—Ç –≤ —Ä—É–∫–∏
    if not equipItem(itemName) then
        print("ü§ñ AUTOSELL: –ù–µ —É–¥–∞–ª–æ—Å—å –≤–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç:", itemName)
        return false
    end
    
    -- –¶–∏–∫–ª –ø—Ä–æ–¥–∞–∂–∏: E > –∂–¥–µ–º 2 —Å–µ–∫ > \ > –∂–¥–µ–º 0.5 —Å–µ–∫ > —Å—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ > –∂–¥–µ–º 0.5 —Å–µ–∫ > enter > –∂–¥–µ–º 2 —Å–µ–∫ > —Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ > –∂–¥–µ–º 0.5 —Å–µ–∫ > enter > –∂–¥–µ–º 2 —Å–µ–∫ > —Å—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ > –∂–¥–µ–º 0.5 —Å–µ–∫ > enter > –∂–¥–µ–º 2 —Å–µ–∫
    
    print("ü§ñ AUTOSELL: 1. –ù–∞–∂–∏–º–∞–µ–º E...")
    pressKey(Enum.KeyCode.E)
    task.wait(2)
    
    print("ü§ñ AUTOSELL: 2. –ù–∞–∂–∏–º–∞–µ–º \\...")
    pressKey(Enum.KeyCode.Backslash)
    task.wait(0.5)
    
    print("ü§ñ AUTOSELL: 3. –ù–∞–∂–∏–º–∞–µ–º —Å—Ç—Ä–µ–ª–∫—É –≤–ø—Ä–∞–≤–æ...")
    pressKey(Enum.KeyCode.Right)
    task.wait(0.5)
    
    print("ü§ñ AUTOSELL: 4. –ù–∞–∂–∏–º–∞–µ–º Enter...")
    pressKey(Enum.KeyCode.Return)
    task.wait(2)
    
    print("ü§ñ AUTOSELL: 5. –ù–∞–∂–∏–º–∞–µ–º —Å—Ç—Ä–µ–ª–∫—É –≤–ª–µ–≤–æ...")
    pressKey(Enum.KeyCode.Left)
    task.wait(0.5)
    
    print("ü§ñ AUTOSELL: 6. –ù–∞–∂–∏–º–∞–µ–º Enter...")
    pressKey(Enum.KeyCode.Return)
    task.wait(2)
    
    print("ü§ñ AUTOSELL: 7. –ù–∞–∂–∏–º–∞–µ–º —Å—Ç—Ä–µ–ª–∫—É –≤–ø—Ä–∞–≤–æ...")
    pressKey(Enum.KeyCode.Right)
    task.wait(0.5)
    
    print("ü§ñ AUTOSELL: 8. –ù–∞–∂–∏–º–∞–µ–º Enter...")
    pressKey(Enum.KeyCode.Return)
    task.wait(2)
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–¥–∞–ª—Å—è –ª–∏ –ø—Ä–µ–¥–º–µ—Ç
    local player = Players.LocalPlayer
    if player and player.Character then
        local tool = player.Character:FindFirstChild(itemName)
        if not tool then
            -- –ü—Ä–µ–¥–º–µ—Ç –∏—Å—á–µ–∑ –∏–∑ —Ä—É–∫ - –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–¥–∞–ª—Å—è
            print("ü§ñ AUTOSELL: ‚úÖ –ü—Ä–µ–¥–º–µ—Ç", itemName, "—É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–¥–∞–Ω")
            return true
        else
            print("ü§ñ AUTOSELL: ‚ùå –ü—Ä–µ–¥–º–µ—Ç", itemName, "–Ω–µ –ø—Ä–æ–¥–∞–ª—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
            return false
        end
    end
    
    return false
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
local function sellItemsToNPC(itemsToSell)
    if isSellingToNPC then return end
    isSellingToNPC = true
    
    print("ü§ñ AUTOSELL: –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–¥–∞–∂—É –ø—Ä–µ–¥–º–µ—Ç–æ–≤:", table.concat(itemsToSell, ", "))
    
    -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º
    if _G.isAutofarmEnabled and type(_G.isAutofarmEnabled) == "function" and _G.isAutofarmEnabled() then
        if _G.stopAutofarm and type(_G.stopAutofarm) == "function" then
            print("ü§ñ AUTOSELL: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏...")
            _G.stopAutofarm()
        end
    end
    
    -- –õ–µ—Ç–∏–º –∫ NPC
    moveToShiftplox(function()
        print("ü§ñ AUTOSELL: –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–¥–∞–∂—É –ø—Ä–µ–¥–º–µ—Ç–æ–≤...")
        
        local soldItems = {}
        local failedItems = {}
        
        for _, itemName in ipairs(itemsToSell) do
            -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –µ—â–µ —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –≤ —Ä—é–∫–∑–∞–∫–µ
            local player = Players.LocalPlayer
            if player and player.Backpack:FindFirstChild(itemName) then
                print("ü§ñ AUTOSELL: –ü—Ä–æ–¥–∞–µ–º –ø—Ä–µ–¥–º–µ—Ç:", itemName)
                
                if sellSingleItemToNPC(itemName) then
                    table.insert(soldItems, itemName)
                else
                    table.insert(failedItems, itemName)
                end
                
                task.wait(1) -- –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø—Ä–æ–¥–∞–∂–∞–º–∏
            else
                print("ü§ñ AUTOSELL: –ü—Ä–µ–¥–º–µ—Ç", itemName, "–±–æ–ª—å—à–µ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ä—é–∫–∑–∞–∫–µ")
            end
        end
        
        print("ü§ñ AUTOSELL: –ü—Ä–æ–¥–∞–∂–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
        print("ü§ñ AUTOSELL: –ü—Ä–æ–¥–∞–Ω–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤:", #soldItems)
        if #failedItems > 0 then
            print("ü§ñ AUTOSELL: –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–¥–∞—Ç—å:", table.concat(failedItems, ", "))
        end
        
        print("ü§ñ AUTOSELL: –ü—Ä–æ–¥–∞–∂–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç...")
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ –ø—Ä–µ–¥–º–µ—Ç—ã
        task.wait(2) -- –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        local remainingItems = checkInventoryForMaxItems()
        
        if #remainingItems > 0 then
            print("ü§ñ AUTOSELL: –û—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏, –ø–æ–≤—Ç–æ—Ä—è–µ–º —Ü–∏–∫–ª...")
            sellItemsToNPC(remainingItems)
        else
            print("ü§ñ AUTOSELL: –í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –ø—Ä–æ–¥–∞–Ω—ã, –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º...")
            isSellingToNPC = false
            
            -- –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º
            if _G.AutofarmConfig and _G.AutofarmConfig.Enabled then
                if _G.startAutofarm and type(_G.startAutofarm) == "function" then
                    _G.startAutofarm()
                end
            end
        end
    end)
end

-- –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Å–µ–ª–ª–∞
local function startAutosell()
    if isAutosellEnabled then return end
    isAutosellEnabled = true
    
    print("ü§ñ AUTOSELL: –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Å–µ–ª–ª–∞...")
    
    -- –í–∫–ª—é—á–∞–µ–º NoClip –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ—Å–µ–ª–∞
    if _G.MovementConfig and _G.startNoClip and type(_G.startNoClip) == "function" then
        print("ü§ñ AUTOSELL: –í–∫–ª—é—á–∞–µ–º NoClip...")
        _G.MovementConfig.NoClip.Enabled = true
        _G.startNoClip()
        print("ü§ñ AUTOSELL: NoClip –≤–∫–ª—é—á–µ–Ω —É—Å–ø–µ—à–Ω–æ")
        

    else
        print("ü§ñ AUTOSELL: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ - —Ñ—É–Ω–∫—Ü–∏—è startNoClip –∏–ª–∏ MovementConfig –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")
    end
    
    -- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞
    local function setupDeathTracking()
        local player = Players.LocalPlayer
        if player and player.Character then
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if humanoid and not deathCheckConnection then
                deathCheckConnection = humanoid.Died:Connect(function()
                    print("ü§ñ AUTOSELL: –ò–≥—Ä–æ–∫ —É–º–µ—Ä! –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ—Å–µ–ª–∞...")
                    stopAutosell()
                    
                    -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º
                    if _G.stopAutofarm and type(_G.stopAutofarm) == "function" then
                        print("ü§ñ AUTOSELL: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Ñ–∞—Ä–º –∏–∑-–∑–∞ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞...")
                        _G.stopAutofarm()
                    end
                end)
            end
        end
    end
    
    -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–º–µ—Ä—Ç–∏
    setupDeathTracking()
    
    -- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–µ—Å–ø–∞–≤–Ω–µ
    Players.LocalPlayer.CharacterAdded:Connect(function()
        task.wait(1) -- –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        setupDeathTracking()
    end)
    
    -- –°–æ–∑–¥–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    autosellCheckTimer = task.spawn(function()
        while isAutosellEnabled do
            task.wait(5) -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
            
            -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ —É–º–µ—Ä –ª–∏ –∏–≥—Ä–æ–∫
            if checkPlayerDeath() then
                break -- –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ —É–º–µ—Ä
            end
            
            if not isSellingToNPC then
                local itemsAtMax = checkInventoryForMaxItems()
                if #itemsAtMax > 0 then
                    print("ü§ñ AUTOSELL: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–µ–¥–º–µ—Ç—ã –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ, –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–¥–∞–∂—É...")
                    sellItemsToNPC(itemsAtMax)
                end
            end
        end
    end)
end

-- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ—Å–µ–ª–ª–∞
local function stopAutosell()
    if not isAutosellEnabled then return end
    isAutosellEnabled = false
    
    print("ü§ñ AUTOSELL: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ—Å–µ–ª–ª–∞...")
    
    if autosellCheckTimer then
        task.cancel(autosellCheckTimer)
        autosellCheckTimer = nil
    end
    
    -- –û—Ç–∫–ª—é—á–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–º–µ—Ä—Ç–∏
    if deathCheckConnection then
        deathCheckConnection:Disconnect()
        deathCheckConnection = nil
    end
    
    isSellingToNPC = false
end

-- –°–æ–∑–¥–∞–Ω–∏–µ GUI –¥–ª—è –∞–≤—Ç–æ—Å–µ–ª–ª–∞
local function createAutosellGUI(functionsContainer, currentY, createToggleSlider, createSlider, createDivider, createSectionHeader)
    -- AUTOSELL —Å–µ–∫—Ü–∏—è
    createDivider()
    createSectionHeader("ü§ñ AUTO SELL")
    
    -- –ì–ª–∞–≤–Ω—ã–π —Ç—É–º–±–ª–µ—Ä –∞–≤—Ç–æ—Å–µ–ª–ª–∞
    createToggleSlider("Auto Sell Enabled", AutosellConfig.Enabled, function(v)
        AutosellConfig.Enabled = v
        if v then
            startAutosell()
        else
            stopAutosell()
        end
    end)
    
    -- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    createSlider("Max Items Count", 5, 20, AutosellConfig.MaxItemCount, function(v) 
        AutosellConfig.MaxItemCount = v 
    end)
    
    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    createDivider()
    local itemsLabel = Instance.new("TextLabel", functionsContainer)
    itemsLabel.Text = "Select Items to Auto Sell:"
    itemsLabel.TextColor3 = Color3.new(1,1,1)
    itemsLabel.BackgroundTransparency = 1
    itemsLabel.Size = UDim2.new(1, -10, 0, 20)
    itemsLabel.Position = UDim2.new(0, 5, 0, currentY)
    itemsLabel.Font = Enum.Font.GothamBold
    itemsLabel.TextSize = 14
    itemsLabel.TextXAlignment = Enum.TextXAlignment.Left
    currentY = currentY + 25
    
    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É–º–±–ª–µ—Ä–æ–≤ –¥–ª—è –∞–≤—Ç–æ—Å–µ–ª–ª–∞
    local function createAutosellItemToggle(itemName, defaultState)
        createToggleSlider(itemName, defaultState, function(v)
            AutosellConfig.Items[itemName] = v
            print("ü§ñ AUTOSELL: –ü—Ä–µ–¥–º–µ—Ç", itemName, "–¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤", v and "ON" or "OFF")
        end)
    end
    
    -- –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∞–≤—Ç–æ—Å–µ–ª–ª–∞
    createAutosellItemToggle("Mysterious Arrow", AutosellConfig.Items["Mysterious Arrow"])
    createAutosellItemToggle("Rokakaka", AutosellConfig.Items["Rokakaka"])
    createAutosellItemToggle("Pure Rokakaka", AutosellConfig.Items["Pure Rokakaka"])
    createAutosellItemToggle("Diamond", AutosellConfig.Items["Diamond"])
    createAutosellItemToggle("Gold Coin", AutosellConfig.Items["Gold Coin"])
    createAutosellItemToggle("Steel Ball", AutosellConfig.Items["Steel Ball"])
    createAutosellItemToggle("Clackers", AutosellConfig.Items["Clackers"])
    createAutosellItemToggle("Caesar's Headband", AutosellConfig.Items["Caesar's Headband"])
    createAutosellItemToggle("Zeppeli's Hat", AutosellConfig.Items["Zeppeli's Hat"])
    createAutosellItemToggle("Zeppeli's Scarf", AutosellConfig.Items["Zeppeli's Scarf"])
    createAutosellItemToggle("Quinton's Glove", AutosellConfig.Items["Quinton's Glove"])
    createAutosellItemToggle("Stone Mask", AutosellConfig.Items["Stone Mask"])
    createAutosellItemToggle("Rib Cage of The Saint's Corpse", AutosellConfig.Items["Rib Cage of The Saint's Corpse"])
    createAutosellItemToggle("Ancient Scroll", AutosellConfig.Items["Ancient Scroll"])
    createAutosellItemToggle("DIO's Diary", AutosellConfig.Items["DIO's Diary"])
    createAutosellItemToggle("Lucky Stone Mask", AutosellConfig.Items["Lucky Stone Mask"])
    createAutosellItemToggle("Lucky Arrow", AutosellConfig.Items["Lucky Arrow"])
end

-- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
_G.AutosellModule = {
    Config = AutosellConfig,
    start = startAutosell,
    stop = stopAutosell,
    isEnabled = function() return isAutosellEnabled end,
    emergencyStop = emergencyStopMovement
}

print("ü§ñ AUTOSELL: –ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ! –õ–∏–º–∏—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã.")

return _G.AutosellModule
